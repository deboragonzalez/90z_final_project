---
title: 'Invest in Women'
subtitle: 'How A Mother''s Education Affect Her Children''s Future'
author: "Debora Gonzalez"
date: "4/24/2020"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)

library(tidyverse)
library(rstanarm)
library(Hmisc)
library(stargazer)
library(broom)
library(cowplot)
library(ggplot2)



```

\newpage
# Background Overview

### Understanding the associations between a mother's education and her children's social and economic mobility

According to Time Magazine, women are the majority of the U.S. laborforce with the healthcare and retail industries being the leaders in female employment. Experts argue that the high numbers of female employees in these industries is tied to the demand "from economically-empowered female consumers" who benefit from these same industries. This does not mean that women across all age-groups are involved in the work-force at high rates. In fact, at ages 25-54 (which is considered prime working age) the civilian workforce participation rate was 76.8% for women while that of men was 89.2% as of Dec. 2019. Women also tend to hold low-paying or part-time positions like assistant, home health aides, maids, etc. Despite these trends, women have had very high education mobility compared to men. Notably, this seemingly radical mobility is largely due to the rapid increase in coed colleges and the establishment of universal education in the U.S. Regardless of how it happened, the Bureau of Labor Statistics affirms that the educational attainment of women of prime working age saw a dramatic increase from 1970 to 2016:


<body>
    <blockquote cite="https://www.bls.gov/opub/ted/2017/a-look-at-womens-education-and-earnings-since-the-1970s.htm">
      "In 2016, 42 percent of these women held a Bachelor’s degree and higher, compared with 11 percent in 1970. In 2016, 6 percent of women had less than a high school diploma—that is, did not graduate from high school or earn a GED—down from 34 percent in 1970."
    </blockquote>
</body>


These amazing statistics highlight an interesting question about the effect of a mother's education on her child's educational and financial outcomes. If women are such a relevant part of the workforce, how do they affect their children's mobility? How is their education level relevant to that of their children? How does a woman's social class affect her son's or daughter's outcomes differently? Because women in the U.S. are no longer (purely) defined by a husband's social or class status, it may be interesting to explore how their level of education and social class affect their children's outcomes. Beller (2009) in the article "Bringing Intergenerational Social Mobility Research into the Twenty-first Century: Why Mothers Matter," challenges the standard of inequality and social mobility research, wherein mothers' background or economic participation is neither common nor important. Beller argues that "models that incorporate both mothers' and fathers' characteristics into class origin measures" provide a better fit than conventional models for both men and women.

\newpage
# Research Question


Inspired by Beller (2009), I would like to take a look at the ways in which educational attainment and/or social class of mothers affect(s) their children's outcomes. I hope to construct a few models to explore these main questions:

(a) Overall, to what extent does mother's education matter for a child's socioeconomic status? How does it compare to father's education? 
(b) Overall, to what extent does mother's education matter for a child's education outcome? How does it compare to father's education? 
(c) For whom does mother's education matter most? Sons? Daughters? Children raised in single-mother households? Or only daughters raised in single-mother households?


To explore these questions I build models that explore the association between a mother's education and her children's outcome and introducing explanatory variable controls such as father's education, college completion, parental family income, parental family income quantile, child's sex, etc. I observe how the mother's education affect her child's educational and financial outcome as a whole and also when controlling for some of these other factors. I put special emphasis in the relationship mothers have to daughters outcomes versus that of sons in different family structures, and theorize the reasons behind any patterns I may find. Ultimately, this project explores the ways in which women influence social mobility for future generations.

\newpage

# Data & Methods

This project uses the National Longitudinal Survey (1979 cohort) to explore the role of mothers in the social and economic mobility of their children. I construct several OLS regression models to estimate the association between explanatory variables and expected outcomes, in this case, the education or income of the child. The research focuses on 'mother's education' as the key explanatory variable. In most cases, a woman's educational attainment, unlike occupation or earnings, is "temporally" prior to her marriage (or motherhood) and thus not directly affected by her husband/partner's socioeconomic status. This means that we are able to treat other indicators of a child's SES (e.g., parental occupation/income) as potential mediators that transmit the effect of mother's education. So, when we control for these other indicators of parental SES such as family income, the regression coeffcient of mother's education could be interpreted as a direct effect net of of these other pathways (Zhou, 2020). 


Similarly, the educational attainment, occupation, cognitive ability of the child could also be seen as mediators, i.e., intervening variables between mother's education and child income. In our dataset, we account for child’s highest grade completed by age 25, which affects child’s income and is affected by mother’s education. I also include sex and the child's family income in 1979 as control explanatory variable since previous research indicates a strong relationship between these variables and a child's economic and educational outcome. Finally, I also evaluate father's education as a potential mediator pathway. Father's education is associated with mother's education via assortative mating and, as intergenerational mobility research indicates, is also likely to affect child outcomes. 




\newpage
# Analysis

```{r data setup, include = FALSE}

load("nlsy79.RData")


dataset1 <- nlsy79 %>% 
  
#  select(hgc_mother_1979, hgc_father_1979, sample_sex_1979, tnfi_trunc_1979,
#  tnfi_trunc_2016, sampweight_1979, hgcrev90_1990, hgcrev90_1989,
#  hgcrev90_1988, hgcrev90_1987, hgcrev90_1986) %>%
  
  mutate(hgc_age25 = case_when(age_1979 == 14 ~ hgc_1990,
                               age_1979 == 15 ~ hgc_1989,
                               age_1979 == 16 ~ hgc_1988,
                               age_1979 == 17 ~ hgc_1987,
                               age_1979 == 18 ~ hgc_1986),
         female = if_else(sex_1979 == 2, 1, 0)) %>% 
  filter(faminc_2016 > 0) %>% 
  mutate(logfaminc16 = log(faminc_2016))

```

### Mother's Overall Effect


```{r overall}
m0 <- lm(logfaminc16 ~ hgc_mother_1979, 
         data = dataset1, 
         weights = sampweight_1979)


m0.5 <- lm(hgc_age25 ~ hgc_mother_1979,
           data = dataset1, 
           weights = sampweight_1979)


stargazer(m0, m0.5, type = "text", digits = 3,
              title = "Mother's Education Impact on her Children",
              omit.summary.stat = c("n", "Min", "Max"),
              covariate.labels=c("Mother's Educ"),
              dep.var.labels = c("Family Income in 2016", "Child's Education by Age 25"))
```


```{r dad_effect}

m0.2 <- lm(logfaminc16 ~ hgc_father_1979, 
         data = dataset1, 
         weights = sampweight_1979)


m0.52 <- lm(hgc_age25 ~ hgc_father_1979,
           data = dataset1, 
           weights = sampweight_1979)


stargazer(m0, m0.5, type = "text", digits = 3,
              title = "Father's Education Impact on her Children",
              omit.summary.stat = c("n", "Min", "Max"),
              covariate.labels=c("Father's Educ"),
              dep.var.labels = c("Family Income in 2016", "Child's Education by Age 25"))


```


```{r overall_graphic}

# plot m0 using absolute dollars on the y axis

fig1a <- augment(m0) %>%
  ggplot(aes(x = hgc_mother_1979, y = exp(.fitted)))+
  geom_line() +
  xlim(0, 20) +
  geom_ribbon(aes(ymin = exp(.fitted - 1.96 * .se.fit),
                  ymax = exp(.fitted + 1.96 * .se.fit)),
              alpha = 0.3) +
  labs(title = "",
       subtitle = "",
       x = "Highest Grade Completed by Mother in 1979",
       y = "Predicted Child's Family Income in '16") +
  theme_classic()

# plot m0.5 using child's year of schooling on the y axis

fig1b <- augment(m0.5) %>%
  ggplot(aes(x = hgc_mother_1979, y = .fitted))+
  geom_line() +
  xlim(0, 20) +
  geom_ribbon(aes(ymin = .fitted - 1.96 * .se.fit,
                  ymax = .fitted + 1.96 * .se.fit),
              alpha = 0.3) +
  labs(title = "",
       subtitle = "",
       x = "Highest Grade Completed by Mother in 1979",
       y = "Highest Grade Completed by Child by Age 25") +
  theme_classic()


plot_fig <- plot_grid(fig1a, fig1b, labels = "AUTO")

# now add the title
title <- ggdraw() + 
  draw_label(
    "Overall Effect of Mother's Education on Child's Outcomes",
    fontface = 'bold',
    x = 0,
    hjust = 0
  ) +
  theme(plot.margin = margin(0, 0, 0, 7))
    
    # add margin on the left of the drawing canvas,
    # so title is aligned with left edge of first plot
    
   

plot_grid(title, plot_fig, ncol = 1,
  
  # rel_heights values control vertical title margins
  
  rel_heights = c(0.1, 1))
```


```{r father_graphic}


# plot m0.2 using absolute dollars on the y axis

fig2a <- augment(m0.2) %>%
  ggplot(aes(x = hgc_father_1979, y = exp(.fitted)))+
  geom_line() +
  xlim(0, 20) +
  geom_ribbon(aes(ymin = exp(.fitted - 1.96 * .se.fit),
                  ymax = exp(.fitted + 1.96 * .se.fit)),
              alpha = 0.3) +
  labs(title = "",
       subtitle = "",
       x = "Highest Grade Completed by Father in 1979",
       y = "Predicted Child's Family Income in '16") +
  theme_classic()

# plot m0.52 using child's year of schooling on the y axis

fig2b <- augment(m0.52) %>%
  ggplot(aes(x = hgc_father_1979, y = .fitted))+
  geom_line() +
  xlim(0, 20) +
  geom_ribbon(aes(ymin = .fitted - 1.96 * .se.fit,
                  ymax = .fitted + 1.96 * .se.fit),
              alpha = 0.3) +
  labs(title = "",
       subtitle = "",
       x = "Highest Grade Completed by Father in 1979",
       y = "Highest Grade Completed by Child by Age 25") +
  theme_classic()



plot_fig2 <- plot_grid(fig2a, fig2b, labels = "AUTO")

# now add the title
title <- ggdraw() + 
  draw_label(
    "Overall Effect of Father's Education on Child's Outcomes",
    fontface = 'bold',
    x = 0,
    hjust = 0
  ) +
  theme(plot.margin = margin(0, 0, 0, 7))
    
    # add margin on the left of the drawing canvas,
    # so title is aligned with left edge of first plot
    
  

fig2 <- plot_grid(title, plot_fig2, ncol = 1,
  
  # rel_heights values control vertical title margins
  
  rel_heights = c(0.1, 1), 
  caption.text = "This model contains missing data from single-mother households where no father info is available.")


ggdraw(add_sub(fig2, "This model contains missing data from single-mother households where no father info is available.", size = 10))
```




### Mother's Education & Child's Income Mediators

This regression explores the relationship between a mother's education and child's income in 2016 controlling for family income in 1979, child's sex, and highest grade completed by age 25. 

```{r dataset2_setup}

mean_dataset2 <- dataset1 %>% 
  drop_na(hgc_father_1979) %>% 
  summarise(mean_dad = mean(hgc_father_1979))
  
dataset2 <- dataset1 %>% 
  mutate(dadedu_na = if_else(is.na(hgc_father_1979), 1, 0),
         hgc_father_1979 = replace_na(hgc_father_1979, 10.7),
         father_absent_1979 = case_when(father_absent_1979 == -4 ~ 1))
  

# The -4 for the father absent variable seems to refer to the respondent's
# father was no longer living in 1979, but the variable is meant to be a binary
# for the qst Father live apart? No =0, Yes = 1. So, I'm recoding -4 as 1, which
# means father is absent.


# A procedure that would allow us to use father's education without dropping
# cases. Suppose the father education variable is "dadedu", one can (a) create a
# new binary variable, say "dadedu_na", indicating whether father's education is
# missing (1 = missing, 0 = not missing); (b) for respondents whose "dadedu" is
# missing, recode it using an arbitrary value (e.g., its sample mean); and (c)
# add both "dadedu" and "dadedu_na" to your model. In this model, since neither
# "dadedu" or "dadedu_na" contains missing values, you won't have cases dropped,
# and the coefficient on "dadedu" variable can still be interpreted in its usual
# way.

```


```{r mediators, results = "asis"}

m1 <- lm(logfaminc16 ~ hgc_mother_1979 + faminc_1979 + sex_1979 + hgc_age25, 
         
             data = dataset2, 
             weights = sampweight_1979)

m2 <- lm(logfaminc16 ~ hgc_mother_1979 + faminc_1979 + sex_1979 + hgc_age25 + hgc_father_1979 + dadedu_na, 
         
             data = dataset2, 
             weights = sampweight_1979)

stargazer(m1, m2, type = "html", digits = 3,
              title = "Mother's Education & her Children's Family Income in 2016: Mediated Effect",
              omit.summary.stat = c("n", "Min", "Max"),
              covariate.labels=c("Mother's Educ", "Fam. Income 1979", "Sex: Female", "Child's Highest Edu by Age 25", "Father's Edu"),
              dep.var.labels = "Family Income in 2016")
```



### Heterogeneity: For Whom Does Mother's Education Matter Most?

```{r hetero, results="asis"}
  

m3 <- lm(logfaminc16 ~ hgc_mother_1979 + hgc_age25 + faminc_1979 + hgc_mother_1979*sex_1979, 
             data = dataset2, 
             weights = sampweight_1979)

# Accounting for father's edu effect:

m4 <- lm(logfaminc16 ~ hgc_mother_1979 + hgc_father_1979 + dadedu_na + hgc_age25 + faminc_1979 + hgc_mother_1979*sex_1979, 
             data = dataset2, 
             weights = sampweight_1979)


# for sex_1979 Male = 1, Female = 2

# Now, what kind of household do mom's have the highest effect in:

m5 <- lm(logfaminc16 ~ hgc_mother_1979 + hgc_age25 + faminc_1979 + hgc_mother_1979*father_absent_1979, 
             data = dataset2, 
             weights = sampweight_1979)

m6 <- lm(logfaminc16 ~ hgc_mother_1979 + hgc_father_1979 + dadedu_na + hgc_age25 + faminc_1979 + hgc_mother_1979*father_absent_1979, 
             data = dataset2, 
             weights = sampweight_1979)


stargazer(m3, m4, m5, m6, type = "html", digits = 3,
              title = "Mother's Education Heterogeneous Effect on their Children's Family Income in 2016: Mediated Pathways",
              omit.summary.stat = c("n", "Min", "Max"),
              covariate.labels=c("Mother's Edu", "Father's Edu", "Father Edu Missing", "Child's Highest Edu by Age 25", "Fam. Income 1979", "Sex: Female", "Interaction: Mother's Edu & Female", "Single Mom Household", "Interaction: Mother's Edu & Single Mom Household"),
              dep.var.labels = "Family Income in 2016")



# stargazer(m4, m5, type = "text")


```


# Conclusions



# References

Beller, E. (2009). Bringing Intergenerational Social Mobility Research into the Twenty-first Century: Why Mothers Matter. American Sociological Review, 74(4), 507–528. https://doi.org/10.1177/000312240907400401.

Bureau of Labor Statistics, U.S. Department of Labor, The Economics Daily, A look at women’s education and earnings since the 1970s on the Internet at https://www.bls.gov/opub/ted/2017/a-look-at-womens-education-and-earnings-since-the-1970s.htm.

Law, Tara. "Women Are Now the Majority of the U.S. Workforce — But Working Women Still Face Serious Challenges" <i>Time Magazine - Business & Economics </i> (Jan. 2020) https://time.com/5766787/women-workforce/.

